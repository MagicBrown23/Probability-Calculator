<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Studying of Card Probabilities in Specific Positions</title>
  <style>
    body {
      background: linear-gradient(to bottom right, #f4f4f4, #e0e0e0);
      font-family: 'Segoe UI', sans-serif;
      padding: 30px;
      text-align: center;
      color: #333;
    }
    h1 {
      font-size: 24px;
      margin-bottom: 20px;
    }
    select, input[type=number], button {
      padding: 10px;
      margin: 10px;
      font-size: 16px;
    }
    .result {
      margin-top: 30px;
      font-size: 18px;
      font-weight: bold;
      color: #2a2a2a;
    }
    #bottomCardDiv {
      margin-bottom: 20px;
    }
  </style>
</head>
<body>

  <h1>Studying of Card Probabilities in Specific Positions</h1>

  <div id="bottomCardDiv">
    <label for="bottomCard">Select the Current Bottom Card:</label><br>
    <select id="bottomCard"></select>
    <button onclick="hideBottomCard()">Lock Bottom Card</button>
  </div>

  <label for="namedCard">Spectator's Named Card:</label><br>
  <select id="namedCard"></select><br>

  <label for="namedNumber">Spectator's Named Number:</label><br>
  <input type="number" id="namedNumber" min="1" max="52"><br>

  <button onclick="calculate()">Calculate</button>

  <div class="result" id="result"></div>

  <script>
    const mnemonica = [
      "4♣","2♥","7♦","3♣","4♥","6♦","A♠","5♥","9♠","2♠","Q♥","3♦","Q♣","8♥",
      "6♠","5♠","9♥","K♣","2♦","J♥","3♠","8♠","6♥","10♣","5♦","K♦","2♣","3♥",
      "8♦","5♣","K♠","J♦","8♣","10♠","K♥","J♣","7♠","10♥","A♦","4♠","7♥","4♦",
      "A♣","9♣","J♠","Q♦","7♣","Q♠","10♦","6♣","A♥","9♦"
    ];

    const suits = ['♦', '♣', '♥', '♠'];
    const ranks = ['A','2','3','4','5','6','7','8','9','10','J','Q','K'];

    function populateCardDropdown(id) {
      const select = document.getElementById(id);
      suits.forEach(suit => {
        ranks.forEach(rank => {
          const card = `${rank}${suit}`;
          const option = document.createElement('option');
          option.value = card;
          option.textContent = card;
          select.appendChild(option);
        });
      });
    }

    populateCardDropdown('bottomCard');
    populateCardDropdown('namedCard');

    function hideBottomCard() {
      document.getElementById('bottomCardDiv').style.display = 'none';
    }

    function calculate() {
      const bottomCard = document.getElementById('bottomCard').value;
      const namedCard = document.getElementById('namedCard').value;
      const namedNumber = parseInt(document.getElementById('namedNumber').value);

      const namedCardPos = mnemonica.indexOf(namedCard) + 1;
      const bottomCardPos = mnemonica.indexOf(bottomCard) + 1;

      const rawTargetPos = namedCardPos - namedNumber;
      const rawCard = mnemonica[rawTargetPos - 1];

      const cutCount = rawTargetPos - bottomCardPos;
      const cutIndex = (cutCount + 52) % 52;

      const finalCard = mnemonica[cutIndex];

      const suitSymbol = finalCard.slice(-1);
      const rankSymbol = finalCard.slice(0, finalCard.length - 1);

      const suitCode = { '♦': 1, '♣': 2, '♥': 3, '♠': 4 }[suitSymbol];
      const rankCode = { 'A': 1, 'J': 11, 'Q': 12, 'K': 13, '10': 10 };

      const rankValue = rankCode[rankSymbol] || parseInt(rankSymbol);
      const secretCode = suitCode * 100 + rankValue;

      const displayCut = cutIndex === 0 ? 52 : cutIndex;
      const percentage = (displayCut / 100).toFixed(2);

      document.getElementById('result').innerText =
        `The probability of your card in that position is 0.${displayCut.toString().padStart(2, '0')}% and only ${secretCode} out of 10000 people have named this combination.`;
    }
  </script>

</body>
</html>
