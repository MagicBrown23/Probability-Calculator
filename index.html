<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ACAAN Mnemonica Cut Helper</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: sans-serif;
      padding: 16px;
      background: #f4f4f4;
      color: #333;
    }
    h2 {
      color: #222;
    }
    label, select, input, button {
      width: 100%;
      max-width: 320px;
      margin: 10px 0;
      font-size: 16px;
      padding: 8px;
      box-sizing: border-box;
    }
    button {
      background-color: #007acc;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:hover {
      background-color: #005fa3;
    }
    #result {
      margin-top: 20px;
      font-size: 18px;
      font-weight: bold;
      color: #006600;
    }
  </style>
</head>
<body>

<h2>ACAAN Mnemonica Cut Helper</h2>

<label for="bottomCard">Bottom Card (after spectator cut):</label>
<select id="bottomCard"></select>

<label for="namedCard">Named Card:</label>
<select id="namedCard"></select>

<label for="namedNumber">Named Number (1–52):</label>
<input type="number" id="namedNumber" min="1" max="52" value="30">

<button onclick="calculateCut()">Calculate</button>

<div id="result"></div>

<script>
  const mnemonica = [
    "4♣","2♥","7♦","3♣","4♥","6♦","A♠","5♥","9♠","2♠",
    "Q♥","3♦","Q♣","8♥","6♠","5♠","9♥","K♣","2♦","J♥",
    "3♠","8♠","6♥","10♣","5♦","K♦","2♣","3♥","8♦","5♣",
    "K♠","J♦","8♣","10♠","K♥","J♣","7♠","10♥","A♦","4♠",
    "7♥","4♦","A♣","9♣","J♠","Q♦","7♣","Q♠","10♦","6♣",
    "A♥","9♦"
  ];

  const suitOrder = [
    "A♦","2♦","3♦","4♦","5♦","6♦","7♦","8♦","9♦","10♦","J♦","Q♦","K♦",
    "A♣","2♣","3♣","4♣","5♣","6♣","7♣","8♣","9♣","10♣","J♣","Q♣","K♣",
    "A♥","2♥","3♥","4♥","5♥","6♥","7♥","8♥","9♥","10♥","J♥","Q♥","K♥",
    "A♠","2♠","3♠","4♠","5♠","6♠","7♠","8♠","9♠","10♠","J♠","Q♠","K♠"
  ];

  function fillCardOptions() {
    const bottomCardSelect = document.getElementById("bottomCard");
    const namedCardSelect = document.getElementById("namedCard");

    suitOrder.forEach(card => {
      const option1 = new Option(card, card);
      const option2 = new Option(card, card);
      bottomCardSelect.add(option1);
      namedCardSelect.add(option2);
    });
  }

  function calculateCut() {
    const bottomCard = document.getElementById("bottomCard").value;
    const namedCard = document.getElementById("namedCard").value;
    const namedNumber = parseInt(document.getElementById("namedNumber").value);

    const bottomIndex = mnemonica.indexOf(bottomCard);
    const namedIndex = mnemonica.indexOf(namedCard);

    if (bottomIndex === -1 || namedIndex === -1) {
      document.getElementById("result").innerText = "Invalid card selection.";
      return;
    }

    // Rotate the Mnemonica stack as per cut
    const rotatedStack = [...mnemonica.slice(bottomIndex + 1), ...mnemonica.slice(0, bottomIndex + 1)];

    // Find where the named card currently is
    const currentPos = rotatedStack.indexOf(namedCard); // 0-based
    const targetPos = namedNumber - 1;

    // How many cards to move from top to bottom to place named card at target position
    const neededCut = (currentPos - targetPos + 52) % 52;

    const cutCardIndex = (neededCut - 1 + 52) % 52;
    const cardToBottom = rotatedStack[cutCardIndex];

    document.getElementById("result").innerText =
      `Move "${cardToBottom}" (currently at position ${cutCardIndex + 1}) to the bottom to place "${namedCard}" at position ${namedNumber}.`;
  }

  fillCardOptions();
</script>

</body>
</html>
