<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Card Probability Analyzer</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(to right, #1e3c72, #2a5298);
      color: white;
      text-align: center;
      padding: 30px;
      margin: 0;
    }

    h1 {
      font-size: 1.5em;
      margin-bottom: 20px;
    }

    label, select, input {
      display: block;
      margin: 12px auto;
      font-size: 1em;
      padding: 10px;
      width: 90%;
      max-width: 300px;
      border-radius: 5px;
      border: none;
    }

    button {
      padding: 12px 25px;
      font-size: 1em;
      margin-top: 20px;
      background-color: #00c6ff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    #result {
      margin-top: 30px;
      font-size: 1.2em;
    }

    @media (max-width: 600px) {
      h1 {
        font-size: 1.2em;
      }
      #result {
        font-size: 1em;
      }
    }
  </style>
</head>
<body>
  <h1>Card Probability Analyzer</h1>

  <label for="bottomCard">Enter Bottom Card:</label>
  <select id="bottomCard" onchange="hideBottomCard()">
    <option value="">-- Select Bottom Card --</option>
  </select>

  <label for="namedCard">Spectator's Named Card:</label>
  <select id="namedCard">
    <option value="">-- Select Named Card --</option>
  </select>

  <label for="namedNumber">Spectator's Named Number (1–52):</label>
  <input type="number" id="namedNumber" min="1" max="52" />

  <button onclick="calculate()">Calculate</button>

  <div id="result"></div>

  <script>
    const mnemonica = [
      "4♣", "2♥", "7♦", "3♣", "4♥", "6♦", "A♠", "5♥", "9♠", "2♠",
      "Q♥", "3♦", "Q♣", "8♥", "6♠", "5♠", "9♥", "K♣", "2♦", "J♥",
      "3♠", "8♠", "6♥", "10♣", "5♦", "K♦", "2♣", "3♥", "8♦", "5♣",
      "K♠", "J♦", "8♣", "10♠", "K♥", "J♣", "7♠", "10♥", "A♦", "4♠",
      "7♥", "4♦", "A♣", "9♣", "J♠", "Q♦", "7♣", "Q♠", "10♦", "6♣",
      "A♥", "9♦"
    ];

    function populateCardOptions(selectId) {
      const suits = ['♦', '♣', '♥', '♠'];
      const ranks = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
      const select = document.getElementById(selectId);
      suits.forEach(suit => {
        ranks.forEach(rank => {
          const card = `${rank}${suit}`;
          const option = document.createElement('option');
          option.value = card;
          option.text = card;
          select.add(option);
        });
      });
    }

    populateCardOptions('bottomCard');
    populateCardOptions('namedCard');

    let bottomCard = null;

    function hideBottomCard() {
      const select = document.getElementById("bottomCard");
      const chosen = select.value;
      if (!mnemonica.includes(chosen)) return;
      bottomCard = chosen;
      select.style.display = "none"; // Immediately hide
    }

    function calculate() {
      const namedCard = document.getElementById("namedCard").value;
      const namedNumber = parseInt(document.getElementById("namedNumber").value);

      if (!bottomCard || !mnemonica.includes(namedCard) || isNaN(namedNumber) || namedNumber < 1 || namedNumber > 52) {
        alert("Please make sure all inputs are correctly filled.");
        return;
      }

      const namedCardPos = mnemonica.indexOf(namedCard) + 1;
      const bottomCardPos = mnemonica.indexOf(bottomCard) + 1;

      const targetPos = namedCardPos - namedNumber;
      const cardToCutMnemonicaPos = ((targetPos - 1 + 52) % 52) + 1;
      const cardToCut = mnemonica[cardToCutMnemonicaPos - 1];

      const cutCount = ((cardToCutMnemonicaPos - bottomCardPos + 52) % 52) || 52;

      const suit = cardToCut.slice(-1);
      const rank = cardToCut.slice(0, -1);
      const suitCode = { '♦': 1, '♣': 2, '♥': 3, '♠': 4 }[suit];
      const rankCode = { 'A': 1, 'J': 11, 'Q': 12, 'K': 13 }[rank] || parseInt(rank);
      const secretCode = suitCode * 100 + rankCode;

      document.getElementById("result").innerText =
        `The probability of your card in that position is 0.${cutCount.toString().padStart(2, '0')}% and only ${secretCode} out of 10000 people have named this combination.`;
    }
  </script>
</body>
</html>
