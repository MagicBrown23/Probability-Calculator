<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Mnemonica - Any Card At Any Number</title>
  <style>
    body {
      font-family: sans-serif;
      max-width: 600px;
      margin: 40px auto;
      padding: 20px;
      border: 1px solid #ddd;
      border-radius: 10px;
    }
    label, select, input, button {
      display: block;
      margin: 10px 0;
      width: 100%;
    }
    .result {
      margin-top: 20px;
      padding: 10px;
      background-color: #f0f0f0;
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <h2>Mnemonica Any Card at Any Number Calculator</h2>

  <label for="bottomCard">Current Bottom Card:</label>
  <select id="bottomCard"></select>

  <label for="targetCard">Named Card (to appear):</label>
  <select id="targetCard"></select>

  <label for="targetNumber">Named Position (1–52):</label>
  <input type="number" id="targetNumber" min="1" max="52" />

  <button onclick="calculateCut()">Calculate Cut</button>

  <div class="result" id="result"></div>

  <script>
    const mnemonica = [
      "4C","2H","7D","3C","4H","6D","AS","5H","9S","2S",
      "QH","3D","QC","8H","6S","5S","9H","KC","2D","JH",
      "3S","8S","6H","10C","5D","KD","2C","3H","8D","5C",
      "KS","JD","8C","10S","KH","JC","7S","10H","AD","4S",
      "7H","4D","AC","9C","JS","QD","7C","QS","10D","6C",
      "AH","9D"
    ];

    function populateSelect(id) {
      const sel = document.getElementById(id);
      mnemonica.forEach(card => {
        const opt = document.createElement("option");
        opt.value = card;
        opt.textContent = card;
        sel.appendChild(opt);
      });
    }

    populateSelect("bottomCard");
    populateSelect("targetCard");

    function mod(n, m) {
      return ((n % m) + m) % m;
    }

    function calculateCut() {
      const bottomCard = document.getElementById("bottomCard").value;
      const targetCard = document.getElementById("targetCard").value;
      const targetNumber = parseInt(document.getElementById("targetNumber").value);
      const result = document.getElementById("result");

      const bottomIndex = mnemonica.indexOf(bottomCard) + 1; // 1-based
      const targetIndex = mnemonica.indexOf(targetCard) + 1;

      if (bottomIndex < 1 || targetIndex < 1 || isNaN(targetNumber) || targetNumber < 1 || targetNumber > 52) {
        result.textContent = "Please enter valid inputs.";
        return;
      }

      const currentShift = mod(52 - bottomIndex, 52);
      const desiredShift = mod(targetIndex - targetNumber, 52);
      const cardsToCut = mod(desiredShift - currentShift, 52);

      const cardToCut = mnemonica[(cardsToCut - 1 + 52) % 52];
      const cutPosition = (cardsToCut === 0) ? "(no cut needed)" : cardsToCut;

      result.innerHTML = `To place <b>${targetCard}</b> at position <b>${targetNumber}</b>:<br>
        ➤ Cut card <b>${cardToCut}</b> (position ${mnemonica.indexOf(cardToCut)+1}) to the bottom.<br>
        ➤ Cut <b>${cutPosition}</b> card(s) from the top to the bottom.`;
    }
  </script>
</body>
</html>
